(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1292:function(e,t,l){Promise.resolve().then(l.bind(l,1324))},1324:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return v}});var s=l(7437),n=l(2265);let a=e=>Math.PI/180*e,r=()=>{let[e,t]=(0,n.useState)([[]]),l=()=>{let e=[];for(let t=0;t<7;t++)e.push([...Array(8)].map(()=>({num:0,disabled:!1})));for(let t=7;t<10;t++)e.push([...Array(8)].map(()=>({num:Math.floor(9*Math.random())+1,disabled:!1})));t(e)},s=(e,t)=>0<=e&&e<8&&0<=t&&t<10,a=(t,l)=>0===e[l][t].num,r=(t,l)=>e[l][t].disabled;return(0,n.useEffect)(()=>{l()},[]),{FIELD_WIDTH:8,FIELD_HEIGHT:10,cells:e,init:l,isWithinField:s,isEmpty:a,isDisabled:r,isExists:(e,t)=>s(e,t)&&!a(e,t)&&!r(e,t),addLine:()=>{t(e=>{let t=[...e].map(e=>[...e]);return t.splice(0,1),t.push([...Array(8)].map(()=>({num:Math.floor(9*Math.random())+1,disabled:!1}))),t})},removeLine:e=>{t(t=>{let l=[...t].map(e=>[...e]);return l.splice(e,1),l.unshift([...Array(8)].map(e=>({num:0,disabled:!1}))),l})},disableCell:(e,l)=>{t(t=>{let s=[...t].map(e=>[...e]);return s[l][e].disabled=!0,s})}}},c=(e,t)=>{let[l,s]=(0,n.useState)();return(0,n.useEffect)(()=>{let l=new Audio(e);l.volume=(null==t?void 0:t.volume)||1,l.loop=(null==t?void 0:t.loop)||!1,s(l)},[]),{play:()=>{l&&l.play()},stop:()=>{l&&(l.pause(),l.currentTime=0)},pause:()=>{l&&l.pause()}}};function i(e){let{className:t="",onClick:l,children:n}=e;return(0,s.jsx)("button",{className:"\n        text-black text-3xl font-bold px-10 py-2 rounded-full shadow-md shadow-black bg-white\n        transition-all active:shadow-none active:translate-y-1 ".concat(t,"\n      "),onClick:l,children:n})}function u(e){let{onClickStart:t}=e;return(0,s.jsxs)("div",{className:" fixed top-0 left-0 flex flex-col justify-center items-center w-screen h-screen bg-gray-800 ",children:[(0,s.jsxs)("h1",{className:"text-neutral-200 text-6xl text-justify text- font-bold",children:["LINE",(0,s.jsx)("br",{}),"NUMBER",(0,s.jsx)("br",{}),"MATCH"]}),(0,s.jsx)(i,{className:"!text-neutral-200 !shadow-rose-900 !bg-rose-600 mt-6 mb-10",onClick:t,children:"GAME START"}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 p-4 rounded-lg text-white bg-slate-700",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-rose-300",children:"同じ数字"}),"または",(0,s.jsx)("span",{className:"text-emerald-300",children:"合計が10"}),"になるように繋げよう"]}),(0,s.jsx)("p",{children:"5ターン経過するか繋げれる数字が無くなったらラインが追加されます"}),(0,s.jsx)("p",{children:"ラインが一番上までいって追加出来なくなったらゲームオーバー"})]})]})}function o(e){let{onClickReturn:t,onClickQuit:l}=e;return(0,s.jsxs)("div",{className:" fixed top-0 left-0 flex flex-col justify-center items-center gap-6 w-screen h-screen bg-opacity-70 bg-gray-900 ",children:[(0,s.jsx)("h1",{className:"text-neutral-200 text-6xl font-bold",children:"PAUSE"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(i,{className:"w-48 !text-neutral-200 !shadow-emerald-900 !bg-emerald-600",onClick:t,children:"RETURN"}),(0,s.jsx)(i,{className:"w-48 !text-neutral-200 !shadow-red-900 !bg-red-600",onClick:l,children:"QUIT"})]})]})}function x(e){let{onClickReturn:t}=e;return(0,s.jsxs)("div",{className:" fixed top-0 left-0 flex flex-col justify-center items-center gap-6 p-4 w-screen h-screen bg-opacity-70 bg-gray-900 ",children:[(0,s.jsx)("h1",{className:"text-neutral-200 text-6xl font-bold",children:"HELP"}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 w-full max-w-lg text-neutral-200 p-4 rounded-lg bg-gray-800",children:[(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsxs)("h2",{className:"flex gap-2 text-neutral-200 text-lg font-bold",children:[(0,s.jsx)("span",{children:"1."}),"軸となる数字をクリックし続ける"]}),(0,s.jsx)("img",{className:"w-1/4",src:".//_next/static/media/help-1.815bcb9c.jpg",alt:"help image 1"})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsxs)("h2",{className:"flex gap-2 text-neutral-200 text-lg font-bold",children:[(0,s.jsx)("span",{children:"2."}),"8方向の好きな方向へ直線でドラッグ"]}),(0,s.jsx)("img",{className:"w-1/4",src:".//_next/static/media/help-2.9c5f9f67.jpg",alt:"help image 2"})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsxs)("h2",{className:"flex gap-2 text-neutral-200 text-lg font-bold",children:[(0,s.jsx)("span",{children:"3."}),"同じ数字又は合計10になるように繋げる"]}),(0,s.jsx)("img",{className:"w-1/4",src:".//_next/static/media/help-3.6a70f093.jpg",alt:"help image 3"})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsxs)("h2",{className:"flex gap-2 text-neutral-200 text-lg font-bold",children:[(0,s.jsx)("span",{children:"4."}),"クリックを離す"]}),(0,s.jsx)("img",{className:"w-1/4",src:".//_next/static/media/help-4.fd2b8429.jpg",alt:"help image 4"})]})]}),(0,s.jsx)(i,{className:"w-48 !text-neutral-200 !shadow-emerald-900 !bg-emerald-600",onClick:t,children:"RETURN"})]})}function d(e){let{score:t,onClickReplay:l,onClickQuit:n}=e;return(0,s.jsxs)("div",{className:" fixed top-0 left-0 flex flex-col justify-center items-center gap-6 w-screen h-screen bg-opacity-70 bg-gray-900 ",children:[(0,s.jsx)("h1",{className:"text-neutral-200 text-6xl font-bold",children:"GAME OVER"}),(0,s.jsxs)("div",{className:"text-gray-300 text-3xl font-bold",children:["SCORE: ",t]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(i,{className:"w-48 !text-neutral-200 !shadow-amber-900 !bg-amber-600",onClick:l,children:"REPLAY"}),(0,s.jsx)(i,{className:"w-48 !text-neutral-200 !shadow-red-900 !bg-red-600",onClick:n,children:"QUIT"})]})]})}function f(e){let{className:t="",onClick:l,children:n}=e;return(0,s.jsx)(i,{className:"flex justify-center items-center w-8 h-8 !px-0 !py-0 text-base ".concat(t),onClick:l,children:n})}function m(e){let{countdown:t}=e;return(0,s.jsxs)("div",{className:"flex justify-center items-center text-neutral-200 text-xs text-center px-6 py-1 rounded-full bg-neutral-900",children:["段追加まで",(0,s.jsx)("span",{className:"text-lg font-bold px-1 ".concat(t<=1?"text-red-400":""),children:t}),"ターン"]})}function h(e){let{score:t}=e;return(0,s.jsx)("div",{className:"inline-flex justify-center w-28 text-neutral-200 text-xl py-1 rounded-full bg-neutral-900",children:t})}function p(e){let{children:t}=e;return(0,s.jsx)("div",{className:"flex justify-center items-center h-10 text-red-400 text-2xl font-bold",children:t})}function g(e){let{className:t="",cell:l}=e;return(0,s.jsx)("div",{className:"\n      flex justify-center items-center w-10 h-10\n      ".concat(["","text-red-300","text-orange-300","text-lime-300","text-green-300","text-emerald-400","text-sky-400","text-indigo-400","text-purple-400","text-pink-400"][l.num]," text-2xl leading-none font-bold\n      rounded-full bg-neutral-900 select-none\n      ").concat(t," ").concat(l.disabled?"!text-neutral-600":"","\n    "),children:l.num>0?l.num:""})}function j(e){let{cell:t}=e;return(0,s.jsx)(g,{className:"!bg-neutral-700",cell:t})}function b(e){let{cell:t}=e;return(0,s.jsx)(g,{className:"!text-white ".concat(["","!bg-red-300","!bg-orange-300","!bg-lime-300","!bg-green-300","!bg-emerald-400","!bg-sky-400","!bg-indigo-400","!bg-purple-400","!bg-pink-400"][t.num]),cell:t})}function y(e){let{cell:t}=e;return(0,s.jsx)(g,{className:"animate-pulsate-fwd",cell:t})}function N(e){let{field:t,onRemove:l=()=>{}}=e,r=c("/assets/audio/select.mp3"),i=c("/assets/audio/remove.mp3"),[u,o]=(0,n.useState)([]),[x,d]=(0,n.useState)([]),[f,m]=(0,n.useState)([]),h=(0,n.useRef)(),p=(e,l)=>{let s=[],n=Math.sign(l.x-e.x),a=Math.sign(l.y-e.y),r=e.x,c=e.y;for(;t.isWithinField(r,c)&&!t.isEmpty(r,c)&&!(l.x===r&&l.y===c);)s.push({x:r,y:c}),r+=n,c+=a;return s.push({...l}),2===s.filter(e=>!t.cells[e.y][e.x].disabled).length},N=(e,t)=>u.some(l=>l.x===e&&l.y===t),E=(e,t)=>x.some(l=>l.x===e&&l.y===t),v=(e,t)=>f.some(l=>l.x===e&&l.y===t),w=(0,n.useCallback)(()=>{let e=[];if(1===u.length){let l=u[0];for(let s=0;s<8;s++){let n=Math.round(Math.cos(a(45*s))),r=Math.round(Math.sin(a(45*s))),c=l.x+n,i=l.y+r;for(;t.isWithinField(c,i);)t.isEmpty(c,i)||t.isDisabled(c,i)||e.push({x:c,y:i}),c+=n,i+=r}}else if(u.length>=2){let l=u[0],s=u[1],n=Math.sign(s.x-l.x),a=Math.sign(s.y-l.y),r=s.x+n,c=s.y+a;for(;t.isWithinField(r,c);)t.isEmpty(r,c)||t.isDisabled(r,c)||e.push({x:r,y:c}),r+=n,c+=a}d(e)},[t,u]),k=()=>{for(let e=0;e<t.FIELD_HEIGHT;e++)for(let l=0;l<t.FIELD_WIDTH;l++)if(t.isExists(l,e))for(let s=0;s<8;s++){let n=[],r=Math.round(Math.cos(a(45*s))),c=Math.round(Math.sin(a(45*s))),i=l+r,u=e+c;for(n.push({x:l,y:e});t.isWithinField(i,u)&&!t.isEmpty(i,u);){if(t.isDisabled(i,u)){i+=r,u+=c;continue}n.push({x:i,y:u});let s=n.every(s=>t.cells[s.y][s.x].num===t.cells[e][l].num),a=10===n.reduce((e,l)=>e+t.cells[l.y][l.x].num,0);if(n.reduce((e,l)=>e+t.cells[l.y][l.x].num,0)>10)break;if(s||a){m([...n]);return}i+=r,u+=c}}},M=(0,n.useCallback)(()=>{if(u.length<2)return;let e=u.every(e=>t.cells[u[0].y][u[0].x].num===t.cells[e.y][e.x].num),s=10===u.reduce((e,l)=>e+t.cells[l.y][l.x].num,0);if(e||s){for(let e of u)t.disableCell(e.x,e.y);i.stop(),i.play()}e&&s?l({type:"SAME_AND_TEN",count:u.length}):e?l({type:"SAME",count:u.length}):s&&l({type:"TEN",count:u.length})},[t.cells,u]),C=(0,n.useCallback)(()=>{t.cells.forEach((e,l)=>{e.every(e=>e.disabled)&&t.removeLine(l)})},[t.cells]),T=(e,l)=>{t.isExists(e,l)&&(r.stop(),r.play(),o([{x:e,y:l}]))},_=(0,n.useCallback)(()=>{M(),o([]),d([])},[M]),S=(e,t)=>{!(u.length<1)&&p(u[u.length-1],{x:e,y:t})&&(N(e,t)?o(e=>{let t=[...e];return t.pop(),t}):E(e,t)&&(r.stop(),r.play(),o(l=>{let s=[...l];return s.push({x:e,y:t}),s})))};return(0,n.useEffect)(()=>(C(),m([]),clearTimeout(h.current),h.current=setTimeout(()=>{k()},5e3),()=>{clearTimeout(h.current)}),[C]),(0,n.useEffect)(()=>{w()},[w]),(0,n.useEffect)(()=>(document.addEventListener("mouseup",_),()=>{document.removeEventListener("mouseup",_)}),[_]),(0,s.jsx)("div",{className:"inline-flex flex-col gap-2",children:t.cells.map((e,t)=>(0,s.jsx)("div",{className:"flex gap-2",children:e.map((e,l)=>(0,s.jsx)("div",{className:"rounded-full",onMouseDown:()=>T(l,t),onMouseEnter:()=>S(l,t),children:N(l,t)?(0,s.jsx)(b,{cell:e}):E(l,t)?(0,s.jsx)(j,{cell:e}):v(l,t)?(0,s.jsx)(y,{cell:e}):(0,s.jsx)(g,{cell:e})},"".concat(l,"-").concat(t)))},t))})}function E(e){let{score:t,text:l,countdown:n,field:a,onClickHelp:r,onClickPause:c,onRemove:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,s.jsx)(f,{className:"!text-neutral-300 !bg-cyan-600 !text-xl",onClick:r,children:"?"}),(0,s.jsx)(h,{score:t}),(0,s.jsx)(f,{className:"!text-neutral-300 !bg-red-600",onClick:c,children:"■"})]}),(0,s.jsx)(p,{children:l.replaceAll("_"," ")})]}),(0,s.jsx)(N,{field:a,onRemove:e=>i(e)}),(0,s.jsx)(m,{countdown:n})]})}function v(){let e=r(),t=c("/assets/audio/bgm.mp3",{volume:.5,loop:!0}),l=c("/assets/audio/gameover.mp3"),[i,f]=(0,n.useState)(!1),[m,h]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1),[j,b]=(0,n.useState)(!1),[y,N]=(0,n.useState)(0),[v,w]=(0,n.useState)(""),[k,M]=(0,n.useState)(5),C=(0,n.useRef)(),T=()=>{for(let t=0;t<e.FIELD_HEIGHT;t++)for(let l=0;l<e.FIELD_WIDTH;l++)if(e.isExists(l,t))for(let s=0;s<8;s++){let n=[],r=Math.round(Math.cos(a(45*s))),c=Math.round(Math.sin(a(45*s))),i=l+r,u=t+c;for(n.push(e.cells[t][l]);e.isWithinField(i,u)&&!e.isEmpty(i,u);){if(e.isDisabled(i,u)){i+=r,u+=c;continue}n.push(e.cells[u][i]);let s=n.every(s=>s.num===e.cells[t][l].num),a=10===n.reduce((e,t)=>e+t.num,0);if(n.reduce((e,t)=>e+t.num,0)>10)break;if(s||a)return!1;i+=r,u+=c}}return!0},_=()=>{f(!1),g(!1),b(!1),N(0),w(""),M(5),e.init(),t.stop()},S=()=>{h(!1),g(!1),t.play()};return(0,n.useEffect)(()=>{if(i&&!j){if(k<=0||T()){if(e.cells[0].some(e=>e.num>0)){b(!0),t.stop(),l.play();return}e.addLine()}k<=0&&M(5)}},[e.cells,k]),(0,n.useEffect)(()=>{if(""!==v)return clearTimeout(C.current),C.current=setTimeout(()=>{w("")},750),()=>{clearTimeout(C.current)}},[e.cells]),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[i&&(0,s.jsx)(E,{score:y,text:v,countdown:k,field:e,onClickHelp:()=>{h(!0),t.pause()},onClickPause:()=>{g(!0),t.pause()},onRemove:e=>{let t=0;switch(e.type){case"SAME_AND_TEN":t=20;break;case"SAME":case"TEN":t=10}N(l=>t*e.count+l),w(e.type),M(e=>e-1)}}),!i&&(0,s.jsx)(u,{onClickStart:()=>{f(!0),t.stop(),t.play()}}),m&&(0,s.jsx)(x,{onClickReturn:S}),p&&(0,s.jsx)(o,{onClickReturn:S,onClickQuit:_}),j&&(0,s.jsx)(d,{score:y,onClickReplay:()=>{f(!0),b(!1),N(0),w(""),M(5),e.init(),t.stop(),t.play()},onClickQuit:_})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=1292)}),_N_E=e.O()}]);